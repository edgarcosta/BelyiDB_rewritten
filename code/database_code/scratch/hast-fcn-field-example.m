load "config.m";
QQ := Rationals();
vals := GetSpecializationValues();
vals := vals[1..5];
// first eliminate y I guess
R<X,Y,T> := PolynomialRing(QQ,3);
f0 := T^9 + (-27*Y - 9*X - 9)*T^8 + (-135*Y + 5077881910940112*X + 1735678106929120073474214)*T^7 + (-1735678109256482615988807*Y - 4339195248862583653288752*X + 119382156228710633433313608054)*T^6 + (-179067991148793816447087712944*Y - 134312474149039441853154543168*X - 156920915659487233369424309168572910479037068800)*T^5 + (-31384183052330509744054706675453917580980451700*Y - 31384183116086068550424254984771049467553233760*X - 500402487353736535519410639708210460802944439064)*T^4 + (-95894360958291855794698930430456644139971860912*Y - 2951206959251114596084350066239776180252396285768910293597824*X + 2017512576625082019289077469696338469256718428263871479467673315718496)*T^3 + (-553351305084496315117690559495362254714199360008725239453200*Y + 1513134427350311944864676558126507734817614674771236523928909049313792*X + 104072270865305364619691421072827565184154655761913691283099249328006877344)*T^2 + (126094535397332274748507425858645882521191870979652964311266845392768*Y + 26019171043513839708197436642431806810761531907676922503984361334427263488*X - 9120064375789516288380533953735084069372601085616822080176825874451257865513276775736999936)*T + 3040021452667865062960916668753542811854831681442744094751262620844765423258478898809603136*Y - 3040021454150025146996847974017386696730275997584426301557337467635612555245691281331244288*X - 2026782917117654881304708088352292186628368951819663978289315897268271387461010597842953600;
I := ideal< R | Y^2 + X*Y + Y - (X^3 - X^2 + 35263068825973*X + 8035546788889694634651), f0 >;
I_e := EliminationIdeal(I,{X,T});
basis := Basis(I_e);
assert #basis eq 1;
f1 := basis[1];
S<x,t> := PolynomialRing(QQ,2);
h := hom< R -> S | [x,0,t] >;
f := h(f1);
time M, mons := PolredGramMatrix(f, vals);
printf "Is positive definite? %o\n", IsPositiveDefinite(M);
L := LatticeWithGram(M);
L_red, basis := LLL(L);


// now some function field stuff
/*
F<x> := RationalFunctionField(QQ);
FY<Y> := PolynomialRing(F);
//y^2 + x*y + y - (x^3 - x^2 + 35263068825973*x + 8035546788889694634651);
K<y> := ext< F | Y^2 + x*Y + Y - (x^3 - x^2 + 35263068825973*x + 8035546788889694634651) >;
KT<T> := PolynomialRing(K);
f := T^9 + (-27*y - 9*x - 9)*T^8 + (-135*y + 5077881910940112*x + 1735678106929120073474214)*T^7 + (-1735678109256482615988807*y - 4339195248862583653288752*x + 119382156228710633433313608054)*T^6 + (-179067991148793816447087712944*y - 134312474149039441853154543168*x - 156920915659487233369424309168572910479037068800)*T^5 + (-31384183052330509744054706675453917580980451700*y - 31384183116086068550424254984771049467553233760*x - 500402487353736535519410639708210460802944439064)*T^4 + (-95894360958291855794698930430456644139971860912*y - 2951206959251114596084350066239776180252396285768910293597824*x + 2017512576625082019289077469696338469256718428263871479467673315718496)*T^3 + (-553351305084496315117690559495362254714199360008725239453200*y + 1513134427350311944864676558126507734817614674771236523928909049313792*x + 104072270865305364619691421072827565184154655761913691283099249328006877344)*T^2 + (126094535397332274748507425858645882521191870979652964311266845392768*y + 26019171043513839708197436642431806810761531907676922503984361334427263488*x - 9120064375789516288380533953735084069372601085616822080176825874451257865513276775736999936)*T + 3040021452667865062960916668753542811854831681442744094751262620844765423258478898809603136*y - 3040021454150025146996847974017386696730275997584426301557337467635612555245691281331244288*x - 2026782917117654881304708088352292186628368951819663978289315897268271387461010597842953600;
Kp<t> := ext< K | f >;
*/
